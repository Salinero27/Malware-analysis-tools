import idaapi
import idc
import idautils
import json


##SCRIPT TO REBUILD ANATOVA FUNCTIONS

functions = []
bucket = []


for f in idautils.Functions():
    name = idc.get_func_name(f)
    if name[:2] == "j_":
        continue

    addr = f
    func = idaapi.get_func(f)
    size = func.endEA - func.startEA 
    print "{} {} - {}".format(addr , name , size )
    tmp = {"addr" : addr , "name": name , "size":  size}
    if size == 11:
        if len(bucket) > 0:
            functions.append(bucket)
            bucket = []
    bucket.append(tmp)
functions.append(bucket)

for bucket in functions:
    init = bucket[0]['addr']
    tmp = bucket[-1]
    end = init
    for f in bucket:
        fin += f['size']
        idaapi.del_func(f['addr'])
    idaapi.add_func(init,end)